function loadScript(url) {
    return new Promise(function(resolve, reject) {
        var script = document.createElement("script");
        script.onload = resolve;
        script.onerror = reject;
        script.src = url;
        document.head.appendChild(script);
    });
}

(async () => {
    await Promise.all([loadScript('https://unpkg.com/vue'), loadScript('https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js')])
    $('#primary-inner #player').after('<div id="vuejs">{{message}}</div>')

    new Vue({
    el: '#vuejs',
    data: {
        message: '',
        ytplayer: null,
    },
    created() {
        this.ytplayer = document.getElementById("movie_player");
        this.ytplayer.addEventListener("onStateChange", "onPlayerStateChange");
        onPlayerStateChange = (state) => {
            if (state === 1){
                console.log(ytplayer)
                this.message = this.ytplayer.getCurrentTime()
            }
        };
    }
    })
})()

